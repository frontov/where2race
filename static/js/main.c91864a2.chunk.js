(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{57:function(e,t,n){e.exports=n(80)},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){var a={"./all.svg":66,"./cycling.svg":67,"./other.svg":68,"./running.svg":69,"./skiing.svg":70};function l(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}l.keys=function(){return Object.keys(a)},l.resolve=r,e.exports=l,l.id=65},66:function(e,t,n){e.exports=n.p+"static/media/all.5c8c5f88.svg"},67:function(e,t,n){e.exports=n.p+"static/media/cycling.2e5b39e8.svg"},68:function(e,t,n){e.exports=n.p+"static/media/other.4ed34d78.svg"},69:function(e,t,n){e.exports=n.p+"static/media/running.7b26ff62.svg"},70:function(e,t,n){e.exports=n.p+"static/media/skiing.f88b16bb.svg"},76:function(e,t,n){},77:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(40),c=n.n(r),o=(n(63),n(64),n(88)),i=(n(32),n(33),n(41));var s=(e=>{let t={};return e.keys().forEach(n=>{t[n.replace("./","").replace(".svg","")]=e(n)}),t})(n(65));let u=new Map(Object.entries(s));var m=function(e){let{name:t,description:n}=e,a=u.get(t);return l.a.createElement("div",null,l.a.createElement("img",{src:a,width:"30",height:"30"}))};var d=function(e){return l.a.createElement(i.a,{interactive:!0,className:"card"},l.a.createElement("div",{className:"icon"},l.a.createElement(m,{name:e.event.kind,description:e.event.kind_rus})),l.a.createElement("div",{className:"flex-container"},l.a.createElement("div",{className:"left child"},l.a.createElement("a",{href:e.event.link,target:"_blank",rel:"noopener noreferrer"},e.event.name)),l.a.createElement("div",{className:"right child"},l.a.createElement("span",{className:"date"},e.event.date),l.a.createElement("br",null),l.a.createElement("span",null,e.event.address),l.a.createElement("br",null),l.a.createElement("b",null)," ",e.event.kind_rus," ",l.a.createElement("b",null))))},g=n(89);const v="https://back.where2race.ru";function f(e,t){return g.a.get(v+e,{params:t})}var E=function(e,t){console.log("params:"),console.log(e),function(e,t,n){f(e,t).then(e=>{n(e.data)}).catch(e=>{console.error("There was an error fetching the events!",e)})}("/events",e,t)},p=n(42);n(75),n(76);var b=e=>{const t=Object(a.useRef)(null),n=Object(a.useRef)(null);return Object(a.useEffect)(()=>{if(t.current)return n.current=new p.a(t.current,{onSelect:t=>{let{date:n}=t;Array.isArray(n)||(n=Array.of(n)),e.onSendData(n)},dateFormat:"dd.MM.yyyy",multipleDates:!0,multipleDatesSeparator:"-",range:e.range}),()=>{var e;null===(e=n.current)||void 0===e||e.destroy()}},[]),Object(a.useEffect)(()=>{var t;null===(t=n.current)||void 0===t||t.update({...e})}),l.a.createElement("div",{className:"date-picker-container"},l.a.createElement("label",null,"\u043a\u043e\u0433\u0434\u0430?"),l.a.createElement("input",{ref:t,className:"date-picker",onClick:e=>{console.log(e)}}))},h=n(91),k=n(90);const S={name:"all",title:"\u0412\u0441\u0435"};var y=async function(e){return(await f("/kinds",e)).data};n(77);const O=(e,t)=>{let{handleClick:n,handleFocus:a,modifiers:r}=t;return r.matchesPredicate?l.a.createElement(h.a,{active:r.active,disabled:r.disabled,onClick:n,onFocus:a,roleStructure:"listoption",text:e.title,key:e.name,icon:l.a.createElement(m,{name:e.name,description:e.title})}):null};var j=e=>{const[t,n]=l.a.useState(S),[r,c]=Object(a.useState)(!0),[o,i]=Object(a.useState)([]);return Object(a.useEffect)(()=>{(async()=>{try{const e=await y({});e.push(S),i(e)}finally{c(!1)}})()},[]),r?l.a.createElement("div",null,"Loading..."):l.a.createElement(k.a,{items:o,filterable:!1,itemRenderer:O,onItemSelect:t=>{n(t),e.onSendData(t)},className:"filter-elem select"},l.a.createElement("label",null,"\u043a\u0430\u043a?"),l.a.createElement("button",{title:null===t||void 0===t?void 0:t.title,className:"button"},null===t||void 0===t?void 0:t.title))};n(79);var w=e=>{const[t,n]=Object(a.useState)([]),[r,c]=Object(a.useState)(S);return l.a.createElement("div",{className:"filter-container"},l.a.createElement(b,{onSendData:e=>{n(e)},range:!0}),l.a.createElement(j,{onSendData:e=>{c(e)}}),l.a.createElement("div",null,l.a.createElement("label",null,"."),l.a.createElement("button",{className:"button fit",onClick:()=>{e.onSendData(r,t)}}," go!")))};const N=e=>(null===e||void 0===e?void 0:e.getTime())/1e3;var D=(e,t,n)=>{return((e,t)=>(console.log(N(e[0])),console.log(t.timestamp_date),0===e.length||(1===e.length?t.timestamp_date>N(e[0]):t.timestamp_date>N(e[0])&&t.timestamp_date<N(e[1]))))(e,n)&&((e,t)=>e===S?!t.kind.includes("other"):t.kind.includes(e.name))(t,n)};var _=()=>l.a.createElement("div",null,l.a.createElement("img",{src:"/images/loading.gif",width:"100%",height:"auto"}));var x=function(){const[e,t]=Object(a.useState)([]),[n,r]=Object(a.useState)([]),[c,i]=Object(a.useState)([]),[s,u]=Object(a.useState)(!1);Object(a.useEffect)(()=>{m({start_date:n.length>0?n[0].getTime():null,end_date:n.length>1?n[1].getTime():null})},[n]),Object(a.useEffect)(()=>{s&&(g(S,[]),console.log("setFilteredEvents"),console.log(e))},[s,e]);const m=e=>{u(!1),E(e,t),u(!0)},g=(t,n)=>{console.log("Data received from child:",t.title),console.log("Data received from child:",n),n.length>0&&(console.log(n[0].getTime()/1e3),r(n)),console.log("pre filter"),console.log("events.length"),console.log(e.length);let a=e.filter(e=>D(n,t,e));console.log("events.length after"),console.log(a.length),i(a)};return l.a.createElement("div",{className:"App"},l.a.createElement(w,{onSendData:g}),s?l.a.createElement(o.a,null,c.map((e,t)=>l.a.createElement(d,{event:e,key:t}))):l.a.createElement(_,null))};var F=e=>{e&&e instanceof Function&&n.e(8).then(n.bind(null,97)).then(t=>{let{getCLS:n,getFID:a,getFCP:l,getLCP:r,getTTFB:c}=t;n(e),a(e),l(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(x,null))),F()}},[[57,6,7]]]);
//# sourceMappingURL=main.c91864a2.chunk.js.map